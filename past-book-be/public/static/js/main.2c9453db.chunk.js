(this["webpackJsonppast-book-fe2"]=this["webpackJsonppast-book-fe2"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(20),s=n.n(r),i=(n(81),n(82),n(10)),o=n(41),u=n(6),d=n(29),l=n(12),j=n.n(l),b=n(24),O=n(2),h=function(e){var t=e.src,n=e.name,a=e.isSelected,c=e.onClick;return Object(O.jsxs)("div",{className:"image-card ".concat(a?"selected":""),onClick:function(){return c&&c(!a,n)},children:[Object(O.jsx)("div",{className:"image-area",style:{backgroundImage:'url("'.concat(t,'")')}}),Object(O.jsx)("p",{className:"label",children:n})]})},f=n(40),m=n.n(f),g=function(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e,null]}))},p=function(e){return e.data},v=function(e){return e.response.data},x=function(e){return{headers:e}},S=function(e){return{get:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(m.a.get("".concat(e).concat(t),x(n)).then(p).catch(v))},post:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return g(m.a.post("".concat(e).concat(t),n,x(a)).then(p).catch(v))},patch:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return g(m.a.patch("".concat(e).concat(t),n,x(a)).then(p).catch(v))}}},C=S("http://localhost:3000/api/v1/"),k=(S(""),C),E=n(108),N=n(50),_=n(61),I=n(62),T=n(75),w=n(74),F=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STATIC_AUTHOR_ID,L=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_USER_IMAGES_URL,function(e){return function(t){Object(T.a)(a,t);var n=Object(w.a)(a);function a(){var e;Object(_.a)(this,a);for(var t=arguments.length,c=new Array(t),r=0;r<t;r++)c[r]=arguments[r];return(e=n.call.apply(n,[this].concat(c))).state={data:[],isFetching:!1,hasError:!1,updateImageList:function(){}},e.updateImageList=function(){var t=Object(b.a)(j.a.mark((function t(n){var a,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.patch("".concat(F,"/selected-images"),{updatedImageSequence:n});case 2:if(a=t.sent,c=Object(i.a)(a,1),!c[0]){t.next=8;break}return E.b.error("Failed to update, Please try again"),t.abrupt("return");case 8:return t.abrupt("return",e.setState({data:n}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(I.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,a,c,r,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isFetching:!0,updateImageList:this.updateImageList}),e.next=3,k.get("".concat(F,"/selected-images"));case 3:if(t=e.sent,n=Object(i.a)(t,2),a=n[0],c=n[1],!a){e.next=11;break}return E.b.error("Unable to fetch selected image data. Please try again"),this.setState({isFetching:!1,hasError:!0}),e.abrupt("return");case 11:if(null!==c){e.next=21;break}return e.next=14,k.post("".concat(F,"/selected-images"),{imageSequence:[]});case 14:s=e.sent,o=Object(i.a)(s,1),o[0]&&E.b.error("Something went wrong. Failed to create entries"),r=[],e.next=22;break;case 21:r=c.imageSequence;case 22:this.setState({data:r,isFetching:!1,hasError:!1});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsx)(e,Object(N.a)(Object(N.a)({},this.props),{},{selectedImages:this.state}))}}]),a}(c.a.Component)}),A=L((function(e){var t=e.selectedImages,n=e.onImageCountChanged,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],u=Object(a.useState)([]),l=Object(i.a)(u,2),f=l[0],m=l[1];Object(a.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t,n,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,k.get("uploaded-images");case 3:t=e.sent,n=Object(i.a)(t,2),a=n[0],c=n[1],a?E.b.error("Data not loaded"):m(c.images),o(!1);case 9:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){n(t.data.length)}),[t.data]);var g=function(){var e=Object(b.a)(j.a.mark((function e(n,a){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,t.updateImageList([].concat(Object(d.a)(t.data),[a]));case 3:e.next=8;break;case 5:return c=t.data.filter((function(e){return e!==a})),e.next=8,t.updateImageList(c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return s?Object(O.jsx)("div",{children:"Loading..."}):Object(O.jsx)("div",{className:"image-container",children:f.map((function(e){return Object(O.jsx)(h,{src:"".concat(e.picture),name:e.id,isSelected:(n=t.data,a=e.id,n.some((function(e){return e===a}))),onClick:g},e.id);var n,a}))})})),P=n(111),R=function(e){var t=e.children,n=e.onClose,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1];return Object(a.useEffect)((function(){s||n()}),[s]),Object(O.jsxs)("div",{className:"drawer",children:[Object(O.jsxs)("button",{className:"open-button",onClick:function(){return o(!s)},children:["Order ",Object(O.jsx)(P.a,{})]}),s&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"content",children:t}),Object(O.jsx)("div",{className:"backdrop",onClick:function(){return o(!1)}})]})]})},y=n(109),D=n(110),U=function(e){var t=e.data,n=e.onChange,a=function(e,a){var c=Object(d.a)(t);if(a){if(e!==c.length-1){var r=t[e+1];c[e+1]=t[e],c[e]=r}}else if(0!==e){var s=t[e-1];c[e-1]=t[e],c[e]=s}n(c)};return Object(O.jsx)("div",{className:"sequencing-table",children:t.map((function(e,t){return Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"name",children:["(",t+1,") ",e]}),Object(O.jsxs)("div",{className:"buttons",children:[Object(O.jsx)("button",{className:"btn",onClick:function(){return a(t,!1)},children:Object(O.jsx)(y.a,{})}),Object(O.jsx)("button",{className:"btn",onClick:function(){return a(t,!0)},children:Object(O.jsx)(D.a,{})})]})]},e)}))})},H=L((function(e){var t=e.selectedImages,n=e.onImageCountChanged,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],u=Object(a.useState)({}),l=Object(i.a)(u,2),f=l[0],m=l[1],g=Object(a.useState)(Object(d.a)(t.data)),p=Object(i.a)(g,2),v=p[0],x=p[1];Object(a.useEffect)((function(){x(t.data),Object(b.a)(j.a.mark((function e(){var n,a,c,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.data.length>0)){e.next=11;break}return o(!0),n=t.data.join(","),e.next=5,k.get("uploaded-images/filter?ids=".concat(n));case 5:a=e.sent,c=Object(i.a)(a,2),r=c[0],s=c[1],r?E.b.error("Failed to fetch data"):m(s.images.reduce((function(e,t){return e[t.id]=t,e}),{})),o(!1);case 11:case"end":return e.stop()}}),e)})))()}),[t.data]),Object(a.useEffect)((function(){n(t.data.length)}),[t.data]);return s?Object(O.jsx)("div",{children:"Loading..."}):Object(O.jsxs)("div",{children:[Object(O.jsx)(R,{onClose:function(){v.length===t.data.length&&t.updateImageList(v)},children:Object(O.jsx)(U,{data:v,onChange:function(e){return x(e)}})}),Object(O.jsx)("div",{className:"image-container",children:t.data.map((function(e){return f[e]&&Object(O.jsx)(h,{src:"".concat(f[e].picture),name:e},f[e].id)}))})]})})),K=function(){var e=Object(a.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(O.jsx)("div",{className:"main-layout",children:Object(O.jsxs)(o.a,{children:[Object(O.jsxs)("div",{className:"nav-bar",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(o.b,{to:"/all",children:Object(O.jsx)("button",{className:"nav-link",children:"All Image"})}),Object(O.jsx)(o.b,{to:"/selected",children:Object(O.jsx)("button",{className:"nav-link",children:"Selected Images"})})]}),Object(O.jsxs)("div",{className:"selected-count",children:["Selected: ",n]})]}),Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)(u.d,{children:[Object(O.jsx)(u.b,{path:"/all",children:Object(O.jsx)(A,{onImageCountChanged:c})}),Object(O.jsx)(u.b,{path:"/selected",children:Object(O.jsx)(H,{onImageCountChanged:c})}),Object(O.jsx)(u.a,{from:"/",to:"/selected"})]})})]})})};var W=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(K,{})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(W,{})}),document.getElementById("root")),q()},81:function(e,t,n){},82:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.2c9453db.chunk.js.map