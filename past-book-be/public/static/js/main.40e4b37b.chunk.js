(this["webpackJsonppast-book-fe2"]=this["webpackJsonppast-book-fe2"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(20),s=n.n(r),i=(n(81),n(82),n(10)),u=n(41),o=n(6),d=n(29),j=n(12),l=n.n(j),b=n(24),h=n(2),f=function(e){var t=e.src,n=e.name,a=e.isSelected,c=e.onClick;return Object(h.jsxs)("div",{className:"image-card ".concat(a?"selected":""),onClick:function(){return c&&c(!a,n)},children:[Object(h.jsx)("div",{className:"image-area",style:{backgroundImage:'url("'.concat(t,'")')}}),Object(h.jsx)("p",{className:"label",children:n})]})},O=n(40),m=n.n(O),g=function(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e,null]}))},p=function(e){return e.data},x=function(e){return e.response.data},v=function(e){return{headers:e}},S=function(e){return{get:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(m.a.get("".concat(e).concat(t),v(n)).then(p).catch(x))},post:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return g(m.a.post("".concat(e).concat(t),n,v(a)).then(p).catch(x))},patch:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return g(m.a.patch("".concat(e).concat(t),n,v(a)).then(p).catch(x))}}},k=S("/api/v1/"),C=(S(""),k),N=n(108),I=n(50),E=n(61),w=n(62),F=n(75),L=n(74),_="1234567",y=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_USER_IMAGES_URL,function(e){return function(t){Object(F.a)(a,t);var n=Object(L.a)(a);function a(){var e;Object(E.a)(this,a);for(var t=arguments.length,c=new Array(t),r=0;r<t;r++)c[r]=arguments[r];return(e=n.call.apply(n,[this].concat(c))).state={data:[],isFetching:!1,hasError:!1,updateImageList:function(){}},e.updateImageList=function(){var t=Object(b.a)(l.a.mark((function t(n){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.patch("".concat(_,"/selected-images"),{updatedImageSequence:n});case 2:if(a=t.sent,c=Object(i.a)(a,1),!c[0]){t.next=8;break}return N.b.error("Failed to update, Please try again"),t.abrupt("return");case 8:return t.abrupt("return",e.setState({data:n}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(l.a.mark((function e(){var t,n,a,c,r,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isFetching:!0,updateImageList:this.updateImageList}),e.next=3,C.get("".concat(_,"/selected-images"));case 3:if(t=e.sent,n=Object(i.a)(t,2),a=n[0],c=n[1],!a){e.next=11;break}return N.b.error("Unable to fetch selected image data. Please try again"),this.setState({isFetching:!1,hasError:!0}),e.abrupt("return");case 11:if(null!==c){e.next=21;break}return e.next=14,C.post("".concat(_,"/selected-images"),{imageSequence:[]});case 14:s=e.sent,u=Object(i.a)(s,1),u[0]&&N.b.error("Something went wrong. Failed to create entries"),r=[],e.next=22;break;case 21:r=c.imageSequence;case 22:this.setState({data:r,isFetching:!1,hasError:!1});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(h.jsx)(e,Object(I.a)(Object(I.a)({},this.props),{},{selectedImages:this.state}))}}]),a}(c.a.Component)}),T=y((function(e){var t=e.selectedImages,n=e.onImageCountChanged,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],u=r[1],o=Object(a.useState)([]),j=Object(i.a)(o,2),O=j[0],m=j[1];Object(a.useEffect)((function(){Object(b.a)(l.a.mark((function e(){var t,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,C.get("uploaded-images");case 3:t=e.sent,n=Object(i.a)(t,2),a=n[0],c=n[1],a?N.b.error("Data not loaded"):m(c.images),u(!1);case 9:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){n(t.data.length)}),[t.data]);var g=function(){var e=Object(b.a)(l.a.mark((function e(n,a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,t.updateImageList([].concat(Object(d.a)(t.data),[a]));case 3:e.next=8;break;case 5:return c=t.data.filter((function(e){return e!==a})),e.next=8,t.updateImageList(c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return s?Object(h.jsx)("div",{children:"Loading..."}):Object(h.jsx)("div",{className:"image-container",children:O.map((function(e){return Object(h.jsx)(f,{src:"".concat(e.picture),name:e.id,isSelected:(n=t.data,a=e.id,n.some((function(e){return e===a}))),onClick:g},e.id);var n,a}))})})),P=n(111),A=function(e){var t=e.children,n=e.onClose,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],u=r[1];return Object(a.useEffect)((function(){s||n()}),[s]),Object(h.jsxs)("div",{className:"drawer",children:[Object(h.jsxs)("button",{className:"open-button",onClick:function(){return u(!s)},children:["Order ",Object(h.jsx)(P.a,{})]}),s&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"content",children:t}),Object(h.jsx)("div",{className:"backdrop",onClick:function(){return u(!1)}})]})]})},D=n(109),R=n(110),U=function(e){var t=e.data,n=e.onChange,a=function(e,a){var c=Object(d.a)(t);if(a){if(e!==c.length-1){var r=t[e+1];c[e+1]=t[e],c[e]=r}}else if(0!==e){var s=t[e-1];c[e-1]=t[e],c[e]=s}n(c)};return Object(h.jsx)("div",{className:"sequencing-table",children:t.map((function(e,t){return Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"name",children:["(",t+1,") ",e]}),Object(h.jsxs)("div",{className:"buttons",children:[Object(h.jsx)("button",{className:"btn",onClick:function(){return a(t,!1)},children:Object(h.jsx)(D.a,{})}),Object(h.jsx)("button",{className:"btn",onClick:function(){return a(t,!0)},children:Object(h.jsx)(R.a,{})})]})]},e)}))})},q=y((function(e){var t=e.selectedImages,n=e.onImageCountChanged,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],u=r[1],o=Object(a.useState)({}),j=Object(i.a)(o,2),O=j[0],m=j[1],g=Object(a.useState)(Object(d.a)(t.data)),p=Object(i.a)(g,2),x=p[0],v=p[1];Object(a.useEffect)((function(){v(t.data),Object(b.a)(l.a.mark((function e(){var n,a,c,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.data.length>0)){e.next=11;break}return u(!0),n=t.data.join(","),e.next=5,C.get("uploaded-images/filter?ids=".concat(n));case 5:a=e.sent,c=Object(i.a)(a,2),r=c[0],s=c[1],r?N.b.error("Failed to fetch data"):m(s.images.reduce((function(e,t){return e[t.id]=t,e}),{})),u(!1);case 11:case"end":return e.stop()}}),e)})))()}),[t.data]),Object(a.useEffect)((function(){n(t.data.length)}),[t.data]);return s?Object(h.jsx)("div",{children:"Loading..."}):Object(h.jsxs)("div",{children:[Object(h.jsx)(A,{onClose:function(){x.length===t.data.length&&t.updateImageList(x)},children:Object(h.jsx)(U,{data:x,onChange:function(e){return v(e)}})}),Object(h.jsx)("div",{className:"image-container",children:t.data.map((function(e){return O[e]&&Object(h.jsx)(f,{src:"".concat(O[e].picture),name:e},O[e].id)}))})]})})),B=function(){var e=Object(a.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(h.jsx)("div",{className:"main-layout",children:Object(h.jsxs)(u.a,{children:[Object(h.jsxs)("div",{className:"nav-bar",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(u.b,{to:"/all",children:Object(h.jsx)("button",{className:"nav-link",children:"All Image"})}),Object(h.jsx)(u.b,{to:"/selected",children:Object(h.jsx)("button",{className:"nav-link",children:"Selected Images"})})]}),Object(h.jsxs)("div",{className:"selected-count",children:["Selected: ",n]})]}),Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{path:"/all",children:Object(h.jsx)(T,{onImageCountChanged:c})}),Object(h.jsx)(o.b,{path:"/selected",children:Object(h.jsx)(q,{onImageCountChanged:c})}),Object(h.jsx)(o.a,{from:"/",to:"/selected"})]})})]})})};var H=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(B,{})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(H,{})}),document.getElementById("root")),K()},81:function(e,t,n){},82:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.40e4b37b.chunk.js.map